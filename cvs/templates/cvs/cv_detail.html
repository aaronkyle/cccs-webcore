{% extends 'base.html' %}
{% load mkdown_filters %}
{% block main %}
    <h1>CV for {{ cv.user.first_name }} {{ cv.user.last_name }}</h1>
    {% if can_update %}
        <p>
            <a href="{% url "cv-update" slug=cv.slug %}" class="btn btn-sm btn-default">
                <span class="glyphicon glyphicon-edit"></span>Edit
            </a>
        </p>
    {% endif %}

    {{ cv.content|mkdown }}

    <h2>Areas of Specialization</h2>
    <table class="table table-striped table-bordered table-hover table-condensed">
        <tr>
            <th>Thematic Issues</th>
            <td>{{ themes }}</td>
        </tr>
        <tr>
            <th>Sectors</th>
            <td>{{ sectors }}</td>
        </tr>
        <tr>
            <th>Countries</th>
            <td>{{ countries }}</td>
        </tr>
    </table>

    <h2>Educational Background</h2>
    {% if cv.cveducation_set.first %}
    <h3>Academic Degrees</h3>
    <table class="table table-striped table-bordered table-hover table-condensed">
        <thead>
        <tr>
            <td>From Date</td>
            <td>To Date</td>
            <td>Institution</td>
            <td>Major(s)/Primary Discipline(s)</td>
            <td>Minor(s)</td>
            <td>Qualification</td>
        </tr>
        </thead>
        <tbody>
        {% for cveducation in cv.cveducation_set.all %}
            <tr>
                <td>{{ cveducation.from_date|date:"b Y"|title }}</td>
                <td>{{ cveducation.to_date|date:"b Y"|title }}</td>
                <td>{{ cveducation.institution }}</td>
                <td>{{ cveducation.subject }}</td>
                <td>{{ cveducation.minors }}</td>
                <td>{{ cveducation.qualification }}</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
    {% endif %}

    {% if cv.cvtraining_set.first %}
    <h3>Specialised Training</h3>
    <table class="table table-striped table-bordered table-hover table-condensed">
        <thead>
        <tr>
            <td>Institution</td>
            <td>Subject</td>
            <td>From</td>
            <td>To</td>
        </tr>
        </thead>
        <tbody>
        {% for cvtraining in cv.cvtraining_set.all %}
            <tr>
                <td>{{ cvtraining.institution }}</td>
                <td>{{ cvtraining.subject }}</td>
                <td>{{ cvtraining.from_date|date:"b Y"|title }}</td>
                <td>{{ cvtraining.to_date|date:"b Y"|title }}</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
    {% endif %}

    {% if cv.cvmembership_set.first %}
    <h2>Membership in Professional Societies</h2>
    <table class="table table-striped table-bordered table-hover table-condensed">
        <thead>
        <tr>
            <td>Organisation</td>
            <td>Role</td>
            <td>From</td>
            <td>To</td>
        </tr>
        </thead>
        <tbody>
        {% for cvmembership in cv.cvmembership_set.all %}
            <tr>
                <td>{{ cvmembership.organization }}</td>
                <td>{{ cvmembership.role }}</td>
                <td>{{ cvmembership.from_date|date:"b Y"|title }}</td>
                <td>{{ cvmembership.to_date|date:"b Y"|title }}</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
    {% endif %}

    <h2>Project Experience</h2>
    <div class="panel-group" id="project_accordion">
        {% for cvproject in cv.cvproject_set.all %}
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h3 class="panel-title">
                        <a class="panel-toggle" data-toggle="collapse" data-parent="#project_accordion" href="#prj{{ cvproject.id }}">
                            <span class="glyphicon glyphicon-plus"></span>&nbsp;&nbsp;{{ cvproject.project.name }}
                        </a>
                        &nbsp;(<a href="{% url 'project-detail' slug=cvproject.project.slug %}">visit project</a>)
                    </h3>
                </div>
                <div id="prj{{ cvproject.id }}" class="panel-body collapse">
                    <div class="panel-inner">
                        <table class="table table-striped table-bordered table-hover table-condensed">
                            <tbody>
                            <tr>
                                <th>Position:</th>
                                <td>{{ cvproject.position }}</td>
                            </tr>
                            <tr>
                                <th>Person Months:</th>
                                <td>{{ cvproject.person_months }}</td>
                            </tr>
                            <tr>
                                <th>Activities:</th>
                                <td>{{ cvproject.activities|mkdown }}</td>
                            </tr>
                            <tr>
                                <th>References:</th>
                                <td>{{ cvproject.references|mkdown }}</td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        {% endfor %}
    </div>

    {% if cv.cvemployment_set.first %}
    <h2>Employment Experience</h2>
    <table class="table table-striped table-bordered table-hover table-condensed">
        <thead>
        <tr>
            <th width="40%">Employer</th>
            <th width="40%">Position</th>
            <th width="20%">Dates Employed</th>
        </tr>
        </thead>
        <tbody>
        {% for cvemployment in cv.cvemployment_set.all %}
            <tr>
                <td>{{ cvemployment.employer }}</td>
                <td>{{ cvemployment.position }}</td>
                <td>
                    {{ cvemployment.from_date|date:"b Y"|title }} -
                    {% if cvemployment.to_date %}
                        {{ cvemployment.to_date|date:"b Y"|title }}
                    {% else %}
                        present{% endif %}
                </td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
    {% endif %}


    {% if cv.cvlanguage_set.first %}
    <h2>Languages</h2>
    <table class="table table-striped table-bordered table-hover table-condensed">
        <thead>
        <tr>
            <td>Language</td>
            <td>Reading</td>
            <td>Writing</td>
            <td>Speaking</td>
        </tr>
        </thead>
        <tbody>
        {% for cvlanguage in cv.cvlanguage_set.all %}
            <tr>
                <td>{{ cvlanguage.language }}</td>
                <td>{{ cvlanguage.reading }}</td>
                <td>{{ cvlanguage.writing }}</td>
                <td>{{ cvlanguage.speaking }}</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
    {% endif %}

{% endblock main %}
